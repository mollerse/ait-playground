(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function fpsToMs(a){return 60/a*16.5}function stopAnimations(){var a=lookup(this,ANIMATIONS);a&&(a=unwrap(a),Object.keys(a).forEach(function(t){cancelAnimationFrame(a[t]),delete a[t]}))}function animate(a,t){function i(a){var t=a-u;o=requestAnimationFrame(i),F(o),u&&t<r||(s(),u=a)}var n=lookup(this,ANIMATIONS);n?n=unwrap(n):store(this,ANIMATIONS,wrap(n={}));var o,e=(new Date).valueOf(),r=fpsToMs(unwrap(a)),s=()=>{this.program=[...t.body],this.executeProgram()},F=a=>n[e]=a,u=0;o=requestAnimationFrame(i),F(o)}const{aitFFIUnwrapValue:unwrap,aitFFIWrapValue:wrap,aitFFI__F:aitFFIF,aitFFILookupVariable:lookup,aitFFIStoreRootVariable:store}=require("ait-lang/ffi");var ANIMATIONS="__aitAnimationAnimations";module.exports={animate:aitFFIF(2,"animate",animate),stopAnimations:aitFFIF(0,"stopAnimations",stopAnimations)};

},{"ait-lang/ffi":24}],2:[function(require,module,exports){
function unwrapper(t){return function(...a){const o=a.map(function(t){return Array.isArray(t.body)?t.body.map(unwrap).reverse():unwrap(t)});t.apply(this,o)}}function canvasContext(t){var a=wrap(unwrap(t).getContext("2d"));return store(this,CTX,a),a}function canvasDimensions(t,a){const o=unwrap(lookup(this,CTX));o.canvas.height=t,o.canvas.width=a}function fillRect(t,a,[o,r]){unwrap(lookup(this,CTX)).fillRect(o,r,a,t)}function clearRect(t,a,[o,r]){unwrap(lookup(this,CTX)).clearRect(o,r,a,t)}function strokeRect(t,a,[o,r]){unwrap(lookup(this,CTX)).strokeRect(o,r,a,t)}function scale(t,a){unwrap(lookup(this,CTX)).scale(a,t)}function rotate(t){unwrap(lookup(this,CTX)).rotate(t)}function translate(t,a){unwrap(lookup(this,CTX)).translate(a,t)}function transform([t,a,o,r,n,i]){unwrap(lookup(this,CTX)).transform(t,a,o,r,n,i)}function setTransform([t,a,o,r,n,i]){unwrap(lookup(this,CTX)).setTransform([t,a,o,r,n,i])}function lineWidth(t){unwrap(lookup(this,CTX)).lineWidth=t}function lineCap(t){unwrap(lookup(this,CTX)).lineCap=t}function lineJoin(t){unwrap(lookup(this,CTX)).lineJoin=t}function miterLimit(t){unwrap(lookup(this,CTX)).miterLimit=t}function globalAlpha(t){unwrap(lookup(this,CTX)).globalAlpha=t}function globalCompositeOperation(t){unwrap(lookup(this,CTX)).globalCompositeOperation=t}function strokeStyle(t){unwrap(lookup(this,CTX)).strokeStyle=t}function fillStyle(t){unwrap(lookup(this,CTX)).fillStyle=t}function shadowOffsetX(t){unwrap(lookup(this,CTX)).shadowOffsetX=t}function shadowOffsetY(t){unwrap(lookup(this,CTX)).shadowOffsetY=t}function shadowBlur(t){unwrap(lookup(this,CTX)).shadowBlur=t}function shadowColor(t){unwrap(lookup(this,CTX)).shadowColor=t}function beginPath(){unwrap(lookup(this,CTX)).beginPath()}function clip(){unwrap(lookup(this,CTX)).clip()}function quadraticCurveTo([t,a],[o,r]){unwrap(lookup(this,CTX)).quadraticCurveTo(o,r,t,a)}function bezierCurveTo([t,a],[o,r],[n,i]){unwrap(lookup(this,CTX)).bezierCurveTo(n,i,o,r,t,a)}function moveTo([t,a]){unwrap(lookup(this,CTX)).moveTo(t,a)}function lineTo([t,a]){unwrap(lookup(this,CTX)).lineTo(t,a)}function rect(t,a,[o,r]){unwrap(lookup(this,CTX)).rect(o,r,a,t)}function arc(t,a,o,r,[n,i]){unwrap(lookup(this,CTX)).arc(n,i,r,o,a,t)}function arcTo(t,[a,o],[r,n]){unwrap(lookup(this,CTX)).arcTo(r,n,a,o,t)}function isPointInPath([t,a]){unwrap(lookup(this,CTX)).isPointInPath(t,a)}function closePath(){unwrap(lookup(this,CTX)).closePath()}function stroke(){unwrap(lookup(this,CTX)).stroke()}function fill(){unwrap(lookup(this,CTX)).fill()}function canvasHeight(){return wrap(unwrap(lookup(this,CTX)).canvas.height)}function canvasWidth(){return wrap(unwrap(lookup(this,CTX)).canvas.width)}function save(){unwrap(lookup(this,CTX)).save()}function restore(){unwrap(lookup(this,CTX)).restore()}function writeImage(){if("node"!=this.type)throw new Error("ait-canvas error: writeImage not supported for runtimes other than node")}function createLinearGradient([t,a],[o,r]){return this.ctx.createLinearGradient(o,r,t,a)}function createRadialGradient(t,[a,o],r,[n,i]){return this.ctx.createRadialGradient(n,i,r,a,o,t)}function addColorStop(t,a,o){return o.addColorStop(a,t),o}const{aitFFIWrapValue:wrap,aitFFIUnwrapValue:unwrap,aitFFI__F:aitFFI__F,aitFFILookupVariable:lookup,aitFFIStoreRootVariable:store}=require("ait-lang/ffi");var CTX="__aitCanvasContext";module.exports={canvasContext:aitFFI__F(1,"canvasContext",canvasContext),canvasDimensions:aitFFI__F(2,"canvasDimensions",unwrapper(canvasDimensions)),canvasHeight:aitFFI__F(0,"canvasHeight",canvasHeight),canvasWidth:aitFFI__F(0,"canvasWidth",canvasWidth),fillRect:aitFFI__F(3,"fillRect",unwrapper(fillRect)),clearRect:aitFFI__F(3,"clearRect",unwrapper(clearRect)),strokeRect:aitFFI__F(3,"strokeRect",unwrapper(strokeRect)),scale:aitFFI__F(1,"scale",unwrapper(scale)),rotate:aitFFI__F(1,"rotate",unwrapper(rotate)),translate:aitFFI__F(2,"translate",unwrapper(translate)),transform:aitFFI__F(1,"transform",unwrapper(transform)),setTransform:aitFFI__F(1,"setTransform",unwrapper(setTransform)),lineWidth:aitFFI__F(1,"lineWidth",unwrapper(lineWidth)),globalAlpha:aitFFI__F(1,"globalAlpha",unwrapper(globalAlpha)),strokeStyle:aitFFI__F(1,"strokeStyle",unwrapper(strokeStyle)),fillStyle:aitFFI__F(1,"fillStyle",unwrapper(fillStyle)),beginPath:aitFFI__F(0,"beginPath",beginPath),clip:aitFFI__F(0,"clip",clip),quadraticCurveTo:aitFFI__F(2,"quadraticCurveTo",unwrapper(quadraticCurveTo)),bezierCurveTo:aitFFI__F(3,"bezierCurveTo",unwrapper(bezierCurveTo)),moveTo:aitFFI__F(1,"moveTo",unwrapper(moveTo)),lineTo:aitFFI__F(1,"lineTo",unwrapper(lineTo)),rect:aitFFI__F(3,"rect",unwrapper(rect)),closePath:aitFFI__F(0,"closePath",closePath),stroke:aitFFI__F(0,"stroke",stroke),arc:aitFFI__F(5,"arc",unwrapper(arc)),arcTo:aitFFI__F(3,"arcTo",unwrapper(arcTo)),isPointInPath:aitFFI__F(1,"isPointInPath",unwrapper(isPointInPath)),fill:aitFFI__F(0,"fill",fill),save:aitFFI__F(0,"save",save),restore:aitFFI__F(0,"restore",restore),lineCap:aitFFI__F(1,"lineCap",unwrapper(lineCap)),lineJoin:aitFFI__F(1,"lineJoin",unwrapper(lineJoin)),miterLimit:aitFFI__F(1,"miterLimit",unwrapper(miterLimit)),globalCompositeOperation:aitFFI__F(1,"globalCompositeOperation",unwrapper(globalCompositeOperation)),shadowOffsetX:aitFFI__F(1,"shadowOffsetX",unwrapper(shadowOffsetX)),shadowOffsetY:aitFFI__F(1,"shadowOffsetY",unwrapper(shadowOffsetY)),shadowBlur:aitFFI__F(1,"shadowBlur",unwrapper(shadowBlur)),shadowColor:aitFFI__F(1,"shadowColor",unwrapper(shadowColor)),createLinearGradient:aitFFI__F(2,"createLinearGradient",createLinearGradient),createRadialGradient:aitFFI__F(4,"createRadialGradient",createRadialGradient),addColorStop:aitFFI__F(3,"addColorStop",addColorStop)};

},{"ait-lang/ffi":24}],3:[function(require,module,exports){
function createElement(e){const t=unwrap(e);return wrap(document.createElement(t))}function setAttribute(e,t,n){return unwrap(n).setAttribute(unwrap(t),unwrap(e)),n}function windowInnerHeight(){return wrap(window.innerHeight)}function windowInnerWidth(){return wrap(window.innerWidth)}function querySelector(e){return wrap(document.querySelector(unwrap(e)))}const{aitFFIUnwrapValue:unwrap,aitFFI__F:aitF,aitFFIWrapValue:wrap}=require("ait-lang/ffi");module.exports={createElement:aitF(1,"createElement",createElement),setAttribute:aitF(3,"setAttribute",setAttribute),windowInnerHeight:aitF(0,"windowInnerHeight",windowInnerHeight),windowInnerWidth:aitF(0,"windowInnerWidth",windowInnerWidth),querySelector:aitF(1,"querySelector",querySelector)};

},{"ait-lang/ffi":24}],4:[function(require,module,exports){
"use strict";function aitFault(t){return{type:"aitFault",cause:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=aitFault;

},{}],5:[function(require,module,exports){
"use strict";function isType(i,r){return r.type===i}function findAstNode(i,r){function e(r){for(var t=[],n=0;n<r.length;n++){var o=r[n];i(o)?t.push(o):"quotation"===o.type?t=t.concat(e(o.body)):"defintion"===o.type&&(t=t.concat(e(o.body.body)))}return t}return e(r)}function unwrapValueInternal(i){return isLoadDirective(i)||isWord(i)||isString(i)||isNumber(i)||isBool(i)||isAitValue(i)||isVar(i)?i.body:isDefinition(i)?i.body.body.map(unwrapValueInternal).reverse():isQuotation(i)?i.body.map(unwrapValueInternal).reverse():void 0}function unwrapValueFFI(i){if(isWord(i)||isString(i)||isNumber(i)||isBool(i)||isAitValue(i))return i.body;if(isQuotation(i))return i;throw isVar(i)?new Error("FFI Error: Operating on variable declarations are not supported"):isDefinition(i)?new Error("FFI Error: Operating on definitions are not supported"):isLoadDirective(i)?new Error("FFI Error: Operating on load directives are not supported"):new Error('Internal Error: Missing unwrapper for ASTNode type "'+i.type+'"')}function wrapValueFFI(i){return(0,_ast.aitValue)(i)}function wrapQuotationFFI(i){return(0,_ast.quotation)(i)}function prettyPrint(i){if(isWord(i)||isString(i)||isNumber(i))return""+i.body;if(isBool(i))return i.body?"true":"false";if(isDefinition(i)){var r=i,e=r.body.body.reverse().map(prettyPrint);return r.body.keyword+":\n  "+e.join(e.length>3?"\n  ":" ")+" ;"}if(isQuotation(i)){var t=i.body.map(prettyPrint).reverse();return"[ "+t.join(t.length>3?"\n  ":" ")+" ]"}return isVar(i)?"-> "+i.body:isAitValue(i)?i.body.toString():""}Object.defineProperty(exports,"__esModule",{value:!0}),exports.findValues=exports.findWords=exports.findVariables=exports.findDefinitions=exports.findLoadDirectives=exports.isValue=exports.isQuotation=exports.isAitValue=exports.isVar=exports.isWord=exports.isString=exports.isNumber=exports.isBool=exports.isDefinition=exports.isLoadDirective=void 0,exports.unwrapValueInternal=unwrapValueInternal,exports.unwrapValueFFI=unwrapValueFFI,exports.wrapValueFFI=wrapValueFFI,exports.wrapQuotationFFI=wrapQuotationFFI,exports.prettyPrint=prettyPrint;var _ast=require("./ast"),isLoadDirective=exports.isLoadDirective=isType.bind(null,"load"),isDefinition=exports.isDefinition=isType.bind(null,"definition"),isBool=exports.isBool=isType.bind(null,"bool"),isNumber=exports.isNumber=isType.bind(null,"number"),isString=exports.isString=isType.bind(null,"string"),isWord=exports.isWord=isType.bind(null,"word"),isVar=exports.isVar=isType.bind(null,"var"),isAitValue=exports.isAitValue=isType.bind(null,"value"),isQuotation=exports.isQuotation=isType.bind(null,"quotation"),isValue=exports.isValue=function(i){return isBool(i)||isNumber(i)||isString(i)||isWord(i)||isVar(i)||isAitValue(i)||isQuotation(i)},findLoadDirectives=exports.findLoadDirectives=findAstNode.bind(null,isLoadDirective),findDefinitions=exports.findDefinitions=findAstNode.bind(null,isDefinition),findVariables=exports.findVariables=findAstNode.bind(null,isVar),findWords=exports.findWords=findAstNode.bind(null,isWord),findValues=exports.findValues=findAstNode.bind(null,isValue);

},{"./ast":6}],6:[function(require,module,exports){
"use strict";function primitiveString(t){return{type:"string",body:t}}function primitiveBoolean(t){return{type:"bool",body:"true"===t}}function primitiveNumber(t){return{type:"number",body:Number(t)}}function word(t){return{type:"word",body:t}}function quotation(t){return{type:"quotation",body:t.reverse()}}function quotationNonReversed(t){return{type:"quotation",body:t}}function definition(t){var r=_slicedToArray(t,2);return{type:"definition",body:{keyword:r[0],body:r[1].reverse()}}}function loadDirective(t){return{type:"load",body:t}}function aitVar(t){return{type:"var",body:t}}function aitValue(t){return{type:"value",body:t}}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function t(t,r){var e=[],i=!0,o=!1,n=void 0;try{for(var u,a=t[Symbol.iterator]();!(i=(u=a.next()).done)&&(e.push(u.value),!r||e.length!==r);i=!0);}catch(t){o=!0,n=t}finally{try{!i&&a.return&&a.return()}finally{if(o)throw n}}return e}return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return t(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.primitiveString=primitiveString,exports.primitiveBoolean=primitiveBoolean,exports.primitiveNumber=primitiveNumber,exports.word=word,exports.quotation=quotation,exports.quotationNonReversed=quotationNonReversed,exports.definition=definition,exports.loadDirective=loadDirective,exports.aitVar=aitVar,exports.aitValue=aitValue;

},{}],7:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function parse(e){var r=final.parse(e);return r.status?r.value.reverse():(0,_aitFault2.default)((0,_parsimmon.formatError)(e,r))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=parse;var _parsimmon=require("parsimmon"),_ast=require("./ast"),_aitFault=require("../aitFault"),_aitFault2=_interopRequireDefault(_aitFault),newline=(0,_parsimmon.regex)(/\n/),notNewlines=(0,_parsimmon.regex)(/[^\n]*/),comment=(0,_parsimmon.string)("#").then(notNewlines).skip(newline.or(_parsimmon.eof)),whitespace=(0,_parsimmon.regex)(/\s+/),ignore=(0,_parsimmon.alt)(whitespace,comment).many(),lexme=function(e){return e.skip(ignore)},lbracket=lexme((0,_parsimmon.string)("[")),rbracket=lexme((0,_parsimmon.string)("]")),blockterminator=lexme((0,_parsimmon.string)(";")),path=lexme((0,_parsimmon.regex)(/[a-zA-Z0-9._~!$&'()*+,;=:@%/-]+/)).desc("file-path"),str=lexme((0,_parsimmon.regex)(/["']((?:\\.|.|\n)*?)["']/,1)).desc("quoted string"),booleanTrue=lexme((0,_parsimmon.string)("true")).desc("boolean true literal"),booleanFalse=lexme((0,_parsimmon.string)("false")).desc("boolean false literal"),number=lexme((0,_parsimmon.regex)(/[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?|[-+]?Infinity/)).desc("number literal"),wordLiteral=lexme((0,_parsimmon.regex)(/[a-zA-Z0-9.<>+=\\*%!\|&/_-]+/)).desc("word literal"),load=lexme((0,_parsimmon.string)("@load")),arrowRight=lexme((0,_parsimmon.string)("->")),colon=lexme((0,_parsimmon.string)(":")).desc("colon-char"),primitive=(0,_parsimmon.lazy)("primivite values",function(){return(0,_parsimmon.alt)(primitiveStringParser,primitiveBooleanParser,primitiveNumberParser)}),value=(0,_parsimmon.lazy)("top level-values",function(){return(0,_parsimmon.alt)(primitive,quotationParser)}),words=(0,_parsimmon.lazy)("words",function(){return(0,_parsimmon.alt)(value,setVarParser,wordLiteralParser)}),expressions=(0,_parsimmon.lazy)("top-level expressions",function(){return(0,_parsimmon.alt)(definitionParser,words,loadDirectiveParser)}),primitiveStringParser=str.map(_ast.primitiveString),primitiveBooleanParser=(0,_parsimmon.alt)(booleanTrue,booleanFalse).map(_ast.primitiveBoolean),primitiveNumberParser=number.map(_ast.primitiveNumber),quotationParser=lbracket.then(words.many()).skip(rbracket).map(_ast.quotation),wordLiteralParser=wordLiteral.map(_ast.word),definitionParser=(0,_parsimmon.seq)(wordLiteral.skip(colon),words.many(),blockterminator).map(_ast.definition),loadDirectiveParser=load.then(path).skip(blockterminator).map(_ast.loadDirective),setVarParser=arrowRight.then(wordLiteral).map(_ast.aitVar),final=ignore.then(expressions.many());

},{"../aitFault":4,"./ast":6,"parsimmon":31}],8:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function browser(){return new BrowserRuntimeImpl}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=browser;var _runtime=require("./runtime"),_runtime2=_interopRequireDefault(_runtime),BrowserRuntimeImpl=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type="browser",e}return _inherits(t,_runtime2.default),t}();

},{"./runtime":10}],9:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function aitWord(e){var o=e.body;return{type:"ait",name:o.keyword,fn:o.body}}function jsWord(e,o,r){return{type:"js",name:o,fn:r,arity:e}}function lookupVariable(e,o){return e.scope[o]}function storeVariable(e,o,r){e.scope[o]=r}function storeRootVariable(e,o,r){e.rootScope[o]=r}function lexicon(){return _stdlib2.default}function populateLexicon(e){var o={};return(0,_astWalkers.findDefinitions)(e).forEach(function(e){var r=aitWord(e);o[r.name]=r}),o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.aitWord=aitWord,exports.jsWord=jsWord,exports.lookupVariable=lookupVariable,exports.storeVariable=storeVariable,exports.storeRootVariable=storeRootVariable,exports.lexicon=lexicon,exports.populateLexicon=populateLexicon;var _astWalkers=require("../parser/ast-walkers"),_stdlib=require("../stdlib"),_stdlib2=_interopRequireDefault(_stdlib);

},{"../parser/ast-walkers":5,"../stdlib":14}],10:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_clone=require("clone"),_clone2=_interopRequireDefault(_clone),_lexicon=require("./lexicon"),_astWalkers=require("../parser/ast-walkers"),_parse=require("../parser/parse"),_parse2=_interopRequireDefault(_parse),_stack=require("./stack"),_stack2=_interopRequireDefault(_stack),BaseRuntime=function(){function e(){_classCallCheck(this,e),this.stack=(0,_stack2.default)(),this.rootScope=Object.create({}),this.scope=this.rootScope,this.type="base",this.lexicon=(0,_lexicon.lexicon)()}return _createClass(e,[{key:"unstack",value:function(e){if(!Array.isArray(e))throw new Error("Aggregate is required for unstack");this.stack.restack(e)}},{key:"reset",value:function(){this.unstack([]),this.lexicon=(0,_lexicon.lexicon)()}},{key:"pushScope",value:function(){var e=Object.create({});Object.setPrototypeOf(e,this.scope),this.scope=e}},{key:"popScope",value:function(){this.scope=Object.getPrototypeOf(this.scope)}},{key:"loadModule",value:function(e){throw new Error("This runtime does not support loading modules, skipping load directive for "+e)}},{key:"evaluate",value:function(e){var t=this,r=(0,_parse2.default)(e);if(!Array.isArray(r))throw new Error(r.cause);var o=r;Object.assign(this.lexicon,(0,_lexicon.populateLexicon)(o)),(0,_astWalkers.findLoadDirectives)(o).forEach(function(e){t.loadModule(e.body)}),this.program=(0,_astWalkers.findValues)(o),this.executeProgram()}},{key:"executeProgram",value:function(){for(;this.program.length;){var e=this.program.pop();if(e||console.warn("something is wrong, got something that isnt an ASTValue"),(0,_astWalkers.isBool)(e)||(0,_astWalkers.isNumber)(e)||(0,_astWalkers.isString)(e)||(0,_astWalkers.isAitValue)(e)||(0,_astWalkers.isQuotation)(e))this.stack.push(e);else if((0,_astWalkers.isVar)(e))this.scope[e.body]=this.stack.pop();else{if(!(0,_astWalkers.isWord)(e))throw new Error("Internal error: Missing handler for ASTNode of type "+e.type);var t=this.handleWord(e);if(Array.isArray(t)){this.program[this.program.length]={type:"word",body:"popScope"};for(var r=0;r<t.length;r++)this.program[this.program.length]=t[r];this.program[this.program.length]={type:"word",body:"pushScope"}}else null!=t&&(this.program[this.program.length]=t)}}}},{key:"handleWord",value:function(e){var t=this.lexicon[e.body],r=this.scope[e.body];if(null==t&&null==r)throw new Error('Could not find definition of word "'+e.body+'"');if(null!=r)this.stack.push(r);else{if("ait"===t.type)return(0,_clone2.default)(t.fn);if("js"===t.type)return this.executeJSWord(t)}}},{key:"executeJSWord",value:function(e){for(var t=[],r=0;r<e.arity;r++)t.push(this.stack.pop());return e.fn.apply(this,t)}}]),e}();exports.default=BaseRuntime;

},{"../parser/ast-walkers":5,"../parser/parse":7,"./lexicon":9,"./stack":11,"clone":28}],11:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function forkFactory(t,e){return new Fork(t,e)}function stackFactory(){return new ForkableStack}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}();exports.default=stackFactory;var Fork=function(){function t(e,n){_classCallCheck(this,t),this.toConsume=e,this.consumable=n,this.consumed=[],this.internalStack=[]}return _createClass(t,[{key:"length",value:function(){return this._length()}},{key:"_length",value:function(){return this.consumable._length()+Math.max(this.consumed.length,this.toConsume)+this.internalStack.length}},{key:"hasOwnElements",value:function(){return this.internalStack.length>0}},{key:"hasElements",value:function(){return this.consumable._length()>0}},{key:"_pop",value:function(){if(this.hasOwnElements())return this.internalStack.pop();if(this.hasElements()){var t=this.consumable._pop();return this.consumed.unshift(t),t}throw new Error("Cannot pop on empty stack")}},{key:"pop",value:function(){return this._pop()}},{key:"push",value:function(t){this.internalStack.push(t)}},{key:"consumeAll",value:function(){for(var t=0;t<this.toConsume;t++)if(this.consumed.length>0)this.consumed.pop();else{if(!this.hasElements())throw new Error("Cannot pop on empty stack");this.consumable._pop()}}},{key:"_stack",value:function(){return this.consumable._stack().concat(this.consumed,this.internalStack)}},{key:"stack",value:function(){return this._stack()}},{key:"resolve",value:function(){this.consumeAll();var t=[];return this.hasOwnElements()&&(t=this.internalStack.pop(),Array.isArray(t)&&(t=[t])),this.consumable._stack().concat(this.consumed,t)}},{key:"restack",value:function(t){this.internalStack=t}}]),t}(),ForkableStack=function(){function t(){_classCallCheck(this,t),this.internalStack=[],this.forks=[]}return _createClass(t,[{key:"push",value:function(t){this.hasForks()?this.topFork().push(t):this.internalStack.push(t)}},{key:"_pop",value:function(){if(this.hasElements())return this.internalStack.pop();throw new Error("Cannot pop on empty stack")}},{key:"pop",value:function(){return this.hasForks()?this.topFork().pop():this._pop()}},{key:"hasForks",value:function(){return this.forks.length>0}},{key:"topFork",value:function(){return this.forks[this.forks.length-1]}},{key:"hasElements",value:function(){return this.internalStack.length>0}},{key:"fork",value:function(){var t=forkFactory(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,this.hasForks()?this.topFork():this);this.forks.push(t)}},{key:"resolve",value:function(){if(!this.hasForks())return[];var t=this.topFork().resolve();return this.forks.pop(),this.hasForks()?this.topFork().restack(t):this.restack(t),this.stack()}},{key:"restack",value:function(t){this.internalStack=t}},{key:"_length",value:function(){return this.internalStack.length}},{key:"length",value:function(){return this.hasForks()?this.topFork().length():this._length()}},{key:"_stack",value:function(){return this.internalStack}},{key:"stack",value:function(){return this.hasForks()?this.topFork().stack():this._stack()}}]),t}();

},{}],12:[function(require,module,exports){
"use strict";function cons(o,r){return o.body.push(r),o}function swons(o,r){return r.body.push(o),r}function append(o,r){return o.body.unshift(r),o}function swappend(o,r){return r.body.unshift(o),r}function uncons(o){return[o,o.body.pop()]}function unswons(o){return[o.body.pop(),o]}function concat(o,r){return(0,_program.aggregate)(("quotation"==o.type?o.body:[o]).concat(r.body))}function enconcat(o,r,n){return(0,_program.aggregate)(o.body.concat(n,r.body))}function first(o){return o.body[o.body.length-1]}function last(o){return o.body[0]}function rest(o){return o.body.pop(),o}function of(o,r){return o.body[o.body.length-r.body-1]}function at(o,r){return r.body[r.body.length-o.body-1]}function ins(o,r,n){var a=r.body.length-o.body-1;if(a<0){var p=Array(-a);r.body=p.concat(r.body)}return r.body[r.body.length-o.body-1]=n,r}function size(o){return(0,_program.value)(o.body.length)}function drop(o,r){return r.body.length=o.body>r.body.length?0:r.body.length-o.body,r}function take(o,r){return 0==o.body?(0,_program.aggregate)([]):(0,_program.aggregate)(r.body.slice(-o.body))}function step(o,r){for(var n=[],a=0;a<r.body.length;a++)n.push.apply(n,(0,_program.exec)(o)),n.push(r.body[a]),n.push.apply(n,(0,_program.assignVariable)(r.body.length-a-1,"_i"));return n.push.apply(n,(0,_program.assignVariableAggr)(r,"_a")),n}function map(o,r){for(var n=[],a=0;a<r.body.length;a++)n.push((0,_program.word)("swappend")),n.push.apply(n,(0,_program.execWithArity)(1,o)),n.push(r.body[a]),n.push.apply(n,(0,_program.assignVariable)(r.body.length-a-1,"_i"));return n.push((0,_program.aggregate)([])),n.push.apply(n,(0,_program.assignVariableAggr)(r,"_a")),n}function map2(o,r,n){for(var a=[],p=0;p<r.body.length;p++)a.push((0,_program.word)("swappend")),a.push.apply(a,(0,_program.execWithArity)(2,o)),a.push(r.body[p],n.body[p+(n.body.length-r.body.length)]),a.push.apply(a,(0,_program.assignVariable)(r.body.length-p-1,"_i"));return a.push.apply(a,(0,_program.assignVariableAggr)(r,"_a1")),a.push.apply(a,(0,_program.assignVariableAggr)(n,"_a2")),a.push((0,_program.aggregate)([])),a}function fold(o,r,n){for(var a=[],p=0;p<n.body.length;p++)a.push.apply(a,(0,_program.execWithArity)(2,o)),a.push(n.body[p]),a.push.apply(a,(0,_program.assignVariable)(n.body.length-p-1,"_i"));return a.push(r),a.push.apply(a,(0,_program.assignVariableAggr)(n,"_a")),a}function sort(o){return o.body.sort(function(o,r){return r.body-o.body}),o}function sortBy(o,r){return r.body.sort(function(r,n){return n.body[n.body.length-o.body-1].body-r.body[r.body.length-o.body-1].body}),r}function filter(o,r){for(var n=[],a=0;a<r.body.length;a++)n.push((0,_program.word)("branch"),(0,_program.quotation)([(0,_program.word)("pop")]),(0,_program.quotation)([(0,_program.word)("swappend")])),n.push.apply(n,(0,_program.execWithArity)(0,o)),n.push(r.body[a]),n.push.apply(n,(0,_program.assignVariable)(r.body.length-a-1,"_i"));return n.push((0,_program.quotation)([])),n.push.apply(n,(0,_program.assignVariableAggr)(r,"_a")),n}function split(o,r){for(var n=[(0,_program.word)("_f"),(0,_program.word)("_t")],a=0;a<r.body.length;a++)n.push((0,_program.word)("branch"),(0,_program.quotation)([(0,_program.word)("pop"),(0,_program.word)("append"),(0,_program.word)("_f")]),(0,_program.quotation)([(0,_program.word)("pop"),(0,_program.word)("append"),(0,_program.word)("_t")])),n.push.apply(n,(0,_program.execWithArity)(0,o)),n.push(r.body[a]),n.push.apply(n,(0,_program.assignVariable)(r.body.length-a-1,"_i"));return n.push.apply(n,(0,_program.assignVariableEmptyAggr)("_t")),n.push.apply(n,(0,_program.assignVariableEmptyAggr)("_f")),n.push.apply(n,(0,_program.assignVariableAggr)(r,"_a")),n}function some(o,r){return o.body.unshift((0,_program.word)("||")),fold(o,(0,_program.value)(!1),r)}function all(o,r){return o.body.unshift((0,_program.word)("&&")),fold(o,(0,_program.value)(!0),r)}Object.defineProperty(exports,"__esModule",{value:!0});var _lexicon=require("../runtime/lexicon"),_program=require("./utils/program");exports.default={cons:(0,_lexicon.jsWord)(2,"cons",cons),swons:(0,_lexicon.jsWord)(2,"swons",swons),append:(0,_lexicon.jsWord)(2,"append",append),swappend:(0,_lexicon.jsWord)(2,"swappend",swappend),uncons:(0,_lexicon.jsWord)(1,"uncons",uncons),unswons:(0,_lexicon.jsWord)(1,"unswons",unswons),concat:(0,_lexicon.jsWord)(2,"concat",concat),enconcat:(0,_lexicon.jsWord)(3,"enconcat",enconcat),first:(0,_lexicon.jsWord)(1,"first",first),last:(0,_lexicon.jsWord)(1,"last",last),rest:(0,_lexicon.jsWord)(1,"rest",rest),of:(0,_lexicon.jsWord)(2,"of",of),at:(0,_lexicon.jsWord)(2,"at",at),ins:(0,_lexicon.jsWord)(3,"ins",ins),size:(0,_lexicon.jsWord)(1,"size",size),drop:(0,_lexicon.jsWord)(2,"drop",drop),take:(0,_lexicon.jsWord)(2,"take",take),step:(0,_lexicon.jsWord)(2,"step",step),map:(0,_lexicon.jsWord)(2,"map",map),map2:(0,_lexicon.jsWord)(3,"map2",map2),fold:(0,_lexicon.jsWord)(3,"fold",fold),sort:(0,_lexicon.jsWord)(1,"sort",sort),sortBy:(0,_lexicon.jsWord)(2,"sortBy",sortBy),filter:(0,_lexicon.jsWord)(2,"filter",filter),split:(0,_lexicon.jsWord)(2,"split",split),some:(0,_lexicon.jsWord)(2,"some",some),all:(0,_lexicon.jsWord)(2,"all",all)};

},{"../runtime/lexicon":9,"./utils/program":23}],13:[function(require,module,exports){
"use strict";function ifte(r,e,o){var n=[(0,_program.word)("branch"),r,e];return n.push.apply(n,(0,_program.execWithArity)(0,o)),n}function branch(r,e,o){return o.body?(0,_program.exec)(e):(0,_program.exec)(r)}function cond(r,e){if(e.body)return(0,_program.exec)(r)}Object.defineProperty(exports,"__esModule",{value:!0});var _lexicon=require("../runtime/lexicon"),_program=require("./utils/program");exports.default={ifte:(0,_lexicon.jsWord)(3,"ifte",ifte),branch:(0,_lexicon.jsWord)(3,"branch",branch),cond:(0,_lexicon.jsWord)(2,"cond",cond)};

},{"../runtime/lexicon":9,"./utils/program":23}],14:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _math=require("./math"),_math2=_interopRequireDefault(_math),_stack=require("./stack"),_stack2=_interopRequireDefault(_stack),_string=require("./string"),_string2=_interopRequireDefault(_string),_iterators=require("./iterators"),_iterators2=_interopRequireDefault(_iterators),_logic=require("./logic"),_logic2=_interopRequireDefault(_logic),_aggregate=require("./aggregate"),_aggregate2=_interopRequireDefault(_aggregate),_quotations=require("./quotations"),_quotations2=_interopRequireDefault(_quotations),_controlflow=require("./controlflow"),_controlflow2=_interopRequireDefault(_controlflow),_recursion=require("./recursion"),_recursion2=_interopRequireDefault(_recursion),_internal=require("./internal"),_internal2=_interopRequireDefault(_internal);exports.default=Object.assign({},_math2.default,_stack2.default,_string2.default,_iterators2.default,_logic2.default,_aggregate2.default,_quotations2.default,_controlflow2.default,_recursion2.default,_internal2.default);

},{"./aggregate":12,"./controlflow":13,"./internal":15,"./iterators":16,"./logic":17,"./math":18,"./quotations":19,"./recursion":20,"./stack":21,"./string":22}],15:[function(require,module,exports){
"use strict";function pushScope(){this.pushScope()}function popScope(){this.popScope()}function forkStack(o){this.stack.fork(o.body)}function resolveStack(){this.stack.resolve()}Object.defineProperty(exports,"__esModule",{value:!0});var _lexicon=require("../runtime/lexicon");exports.default={pushScope:(0,_lexicon.jsWord)(0,"pushScope",pushScope),popScope:(0,_lexicon.jsWord)(0,"popScope",popScope),forkStack:(0,_lexicon.jsWord)(1,"forkStack",forkStack),resolveStack:(0,_lexicon.jsWord)(0,"resolveStack",resolveStack)};

},{"../runtime/lexicon":9}],16:[function(require,module,exports){
"use strict";function whileLoop(r,e){var o=[];o.push((0,_program.word)("while"),r,e),o.push.apply(o,(0,_program.exec)(r));var i=[(0,_program.word)("cond"),(0,_program.quotation)(o)];return i.push.apply(i,(0,_program.execWithArity)(0,e)),i}function times(r,e){for(var o=[],i=0;i<e.body;i++)o.push.apply(o,(0,_program.exec)(r)),o.push.apply(o,(0,_program.assignVariable)(e.body-i-1,"_i"));return o}Object.defineProperty(exports,"__esModule",{value:!0});var _lexicon=require("../runtime/lexicon"),_program=require("./utils/program");exports.default={while:(0,_lexicon.jsWord)(2,"while",whileLoop),times:(0,_lexicon.jsWord)(2,"times",times)};

},{"../runtime/lexicon":9,"./utils/program":23}],17:[function(require,module,exports){
"use strict";function small(o){return"quotation"==o.type?(0,_program.value)(o.body.length<2):(0,_program.value)(0===o.body||1===o.body||-1===o.body)}function zero(o){return"quotation"==o.type?(0,_program.value)(0===o.body.length):(0,_program.value)(0===o.body)}Object.defineProperty(exports,"__esModule",{value:!0});var _lexicon=require("../runtime/lexicon"),_program=require("./utils/program");exports.default={">":(0,_lexicon.jsWord)(2,">",function(o,r){return(0,_program.value)(r.body>o.body)}),"<":(0,_lexicon.jsWord)(2,"<",function(o,r){return(0,_program.value)(r.body<o.body)}),"=":(0,_lexicon.jsWord)(2,"=",function(o,r){return(0,_program.value)(r.body===o.body)}),"!=":(0,_lexicon.jsWord)(2,"!=",function(o,r){return(0,_program.value)(r.body!==o.body)}),">=":(0,_lexicon.jsWord)(2,">=",function(o,r){return(0,_program.value)(r.body>=o.body)}),"<=":(0,_lexicon.jsWord)(2,"<=",function(o,r){return(0,_program.value)(r.body<=o.body)}),"||":(0,_lexicon.jsWord)(2,"||",function(o,r){return(0,_program.value)(r.body||o.body)}),"&&":(0,_lexicon.jsWord)(2,"&&",function(o,r){return(0,_program.value)(r.body&&o.body)}),small:(0,_lexicon.jsWord)(1,"small",small),zero:(0,_lexicon.jsWord)(1,"zero",zero)};

},{"../runtime/lexicon":9,"./utils/program":23}],18:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _lexicon=require("../runtime/lexicon"),_program=require("./utils/program");exports.default={PI:(0,_lexicon.jsWord)(0,"PI",function(){return(0,_program.value)(Math.PI)}),E:(0,_lexicon.jsWord)(0,"E",function(){return(0,_program.value)(Math.E)}),random:(0,_lexicon.jsWord)(0,"random",function(){return(0,_program.value)(Math.random())}),random2:(0,_lexicon.jsWord)(2,"random2",function(o,r){return(0,_program.value)(r.body+Math.random()*(o.body-r.body))}),"*":(0,_lexicon.jsWord)(2,"*",function(o,r){return(0,_program.value)(r.body*o.body)}),"/":(0,_lexicon.jsWord)(2,"/",function(o,r){return(0,_program.value)(r.body/o.body)}),"+":(0,_lexicon.jsWord)(2,"+",function(o,r){return(0,_program.value)(r.body+o.body)}),"-":(0,_lexicon.jsWord)(2,"-",function(o,r){return(0,_program.value)(r.body-o.body)}),mod:(0,_lexicon.jsWord)(2,"mod",function(o,r){return(0,_program.value)(r.body%o.body)}),neg:(0,_lexicon.jsWord)(1,"neg",function(o){return(0,_program.value)(-o.body)}),abs:(0,_lexicon.jsWord)(1,"abs",function(o){return(0,_program.value)(Math.abs(o.body))}),max:(0,_lexicon.jsWord)(2,"max",function(o,r){return(0,_program.value)(Math.max(r.body,o.body))}),min:(0,_lexicon.jsWord)(2,"min",function(o,r){return(0,_program.value)(Math.min(r.body,o.body))}),sqrt:(0,_lexicon.jsWord)(1,"sqrt",function(o){return(0,_program.value)(Math.sqrt(o.body))}),cbrt:(0,_lexicon.jsWord)(1,"cbrt",function(o){return(0,_program.value)(Math.cbrt(o.body))}),pow:(0,_lexicon.jsWord)(2,"pow",function(o,r){return(0,_program.value)(Math.pow(r.body,o.body))}),floor:(0,_lexicon.jsWord)(1,"floor",function(o){return(0,_program.value)(Math.floor(o.body))}),ceil:(0,_lexicon.jsWord)(1,"ceil",function(o){return(0,_program.value)(Math.ceil(o.body))}),round:(0,_lexicon.jsWord)(1,"round",function(o){return(0,_program.value)(Math.round(o.body))}),exp:(0,_lexicon.jsWord)(1,"exp",function(o){return(0,_program.value)(Math.exp(o.body))}),sign:(0,_lexicon.jsWord)(1,"sign",function(o){return(0,_program.value)(Math.sign(o.body))}),log:(0,_lexicon.jsWord)(1,"log",function(o){return(0,_program.value)(Math.log(o.body))}),log10:(0,_lexicon.jsWord)(1,"log10",function(o){return(0,_program.value)(Math.log10(o.body))}),cos:(0,_lexicon.jsWord)(1,"cos",function(o){return(0,_program.value)(Math.cos(o.body))}),acos:(0,_lexicon.jsWord)(1,"acos",function(o){return(0,_program.value)(Math.acos(o.body))}),cosh:(0,_lexicon.jsWord)(1,"cosh",function(o){return(0,_program.value)(Math.cosh(o.body))}),acosh:(0,_lexicon.jsWord)(1,"acosh",function(o){return(0,_program.value)(Math.acosh(o.body))}),sin:(0,_lexicon.jsWord)(1,"sin",function(o){return(0,_program.value)(Math.sin(o.body))}),asin:(0,_lexicon.jsWord)(1,"asin",function(o){return(0,_program.value)(Math.asin(o.body))}),sinh:(0,_lexicon.jsWord)(1,"sinh",function(o){return(0,_program.value)(Math.sinh(o.body))}),asinh:(0,_lexicon.jsWord)(1,"asinh",function(o){return(0,_program.value)(Math.asinh(o.body))}),tan:(0,_lexicon.jsWord)(1,"tan",function(o){return(0,_program.value)(Math.tan(o.body))}),atan:(0,_lexicon.jsWord)(1,"atan",function(o){return(0,_program.value)(Math.atan(o.body))}),atan2:(0,_lexicon.jsWord)(2,"atan2",function(o,r){return(0,_program.value)(Math.atan2(r.body,o.body))}),tanh:(0,_lexicon.jsWord)(1,"tanh",function(o){return(0,_program.value)(Math.tanh(o.body))}),atanh:(0,_lexicon.jsWord)(1,"atanh",function(o){return(0,_program.value)(Math.atanh(o.body))}),succ:(0,_lexicon.jsWord)(1,"succ",function(o){return(0,_program.value)(o.body+1)}),pred:(0,_lexicon.jsWord)(1,"pred",function(o){return(0,_program.value)(o.body-1)})};

},{"../runtime/lexicon":9,"./utils/program":23}],19:[function(require,module,exports){
"use strict";function _exec(r){return(0,_program.exec)(r)}function nullary(r){return(0,_program.execWithArity)(0,r)}function unary(r){return(0,_program.execWithArity)(1,r)}function binary(r){return(0,_program.execWithArity)(2,r)}function ternary(r){return(0,_program.execWithArity)(3,r)}function dip(r,e){var n=[e];return n.push.apply(n,(0,_program.exec)(r)),n}function cleave(r,e,n){var o=[(0,_program.word)("dip")],a=[];return a.push.apply(a,(0,_program.exec)(e)),a.push(n),o.push((0,_program.quotation)(a)),o.push.apply(o,(0,_program.exec)(r)),o.push(n),o}Object.defineProperty(exports,"__esModule",{value:!0});var _lexicon=require("../runtime/lexicon"),_program=require("./utils/program");exports.default={exec:(0,_lexicon.jsWord)(1,"exec",_exec),nullary:(0,_lexicon.jsWord)(1,"nullary",nullary),unary:(0,_lexicon.jsWord)(1,"unary",unary),binary:(0,_lexicon.jsWord)(1,"binary",binary),ternary:(0,_lexicon.jsWord)(1,"ternary",ternary),dip:(0,_lexicon.jsWord)(2,"dip",dip),cleave:(0,_lexicon.jsWord)(3,"cleave",cleave)};

},{"../runtime/lexicon":9,"./utils/program":23}],20:[function(require,module,exports){
"use strict";function linrec(r,p,e,o){var a=[];a.push.apply(a,(0,_program.exec)(r)),a.push((0,_program.word)("linrec"),r,p,e,o),a.push.apply(a,(0,_program.exec)(p));var i=[(0,_program.word)("branch")];return i.push((0,_program.quotation)(a)),i.push(e),i.push.apply(i,(0,_program.execWithArity)(0,o)),i}function tailrec(r,p,e){var o=[];o.push((0,_program.word)("tailrec"),r,p,e),o.push.apply(o,(0,_program.exec)(r));var a=[(0,_program.word)("branch")];return a.push((0,_program.quotation)(o)),a.push(p),a.push.apply(a,(0,_program.execWithArity)(0,e)),a}function binrec(r,p,e,o){var a=[];a.push.apply(a,(0,_program.exec)(r)),a.push((0,_program.word)("dip"),(0,_program.quotation)([(0,_program.word)("binrec"),r,p,e,o]),(0,_program.word)("binrec"),r,p,e,o),a.push.apply(a,(0,_program.exec)(p));var i=[(0,_program.word)("branch")];return i.push((0,_program.quotation)(a)),i.push(e),i.push.apply(i,(0,_program.execWithArity)(0,o)),i}Object.defineProperty(exports,"__esModule",{value:!0});var _lexicon=require("../runtime/lexicon"),_program=require("./utils/program");exports.default={linrec:(0,_lexicon.jsWord)(4,"linrec",linrec),tailrec:(0,_lexicon.jsWord)(3,"tailrec",tailrec),binrec:(0,_lexicon.jsWord)(4,"binrec",binrec)};

},{"../runtime/lexicon":9,"./utils/program":23}],21:[function(require,module,exports){
"use strict";function _interopRequireDefault(o){return o&&o.__esModule?o:{default:o}}function dup(o){return"quotation"==o.type?[(0,_clone2.default)(o),o]:[o,o]}function dupd(o,r){return"quotation"==r.type?[o,r,(0,_clone2.default)(r)]:[o,r,r]}function unstack(o){this.unstack(o.body)}function stack(){return(0,_program.quotation)((0,_clone2.default)(this.stack.stack(),!1).reverse())}Object.defineProperty(exports,"__esModule",{value:!0});var _clone=require("clone"),_clone2=_interopRequireDefault(_clone),_lexicon=require("../runtime/lexicon"),_astWalkers=require("../parser/ast-walkers"),_program=require("./utils/program"),pop=function(o){},popd=function(o,r){return o},swap=function(o,r){return[r,o]},swapd=function(o,r,n){return[o,n,r]},rollup=function(o,r,n){return[n,o,r]},rollupd=function(o,r,n,t){return[o,t,r,n]},rolldown=function(o,r,n){return[r,n,o]},rolldownd=function(o,r,n,t){return[o,n,t,r]},rotate=function(o,r,n){return[n,r,o]},rotated=function(o,r,n,t){return[o,t,n,r]},dot=function(o){return console.log((0,_astWalkers.prettyPrint)(o))};exports.default={".":(0,_lexicon.jsWord)(1,".",dot),dup:(0,_lexicon.jsWord)(1,"dup",dup),dupd:(0,_lexicon.jsWord)(2,"dupd",dupd),pop:(0,_lexicon.jsWord)(1,"pop",pop),popd:(0,_lexicon.jsWord)(2,"popd",popd),swap:(0,_lexicon.jsWord)(2,"swap",swap),swapd:(0,_lexicon.jsWord)(3,"swapd",swapd),rollup:(0,_lexicon.jsWord)(3,"rollup",rollup),rollupd:(0,_lexicon.jsWord)(4,"rollupd",rollupd),rolldown:(0,_lexicon.jsWord)(3,"rolldown",rolldown),rolldownd:(0,_lexicon.jsWord)(4,"rolldownd",rolldownd),rotate:(0,_lexicon.jsWord)(3,"rotate",rotate),rotated:(0,_lexicon.jsWord)(4,"rotated",rotated),stack:(0,_lexicon.jsWord)(0,"stack",stack),unstack:(0,_lexicon.jsWord)(1,"unstack",unstack)};

},{"../parser/ast-walkers":5,"../runtime/lexicon":9,"./utils/program":23,"clone":28}],22:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _lexicon=require("../runtime/lexicon"),_program=require("./utils/program");exports.default={replace:(0,_lexicon.jsWord)(2,"replace",function(e,r){return(0,_program.value)(e.body.replace(/%s/,r.body))}),replace2:(0,_lexicon.jsWord)(3,"replace2",function(e,r,o){return(0,_program.value)(e.body.replace(/%s/,r.body).replace(/%s/,o.body))}),replace3:(0,_lexicon.jsWord)(4,"replace3",function(e,r,o,l){return(0,_program.value)(e.body.replace(/%s/,r.body).replace(/%s/,o.body).replace(/%s/,l.body))})};

},{"../runtime/lexicon":9,"./utils/program":23}],23:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function exec(e){return(0,_clone2.default)(e.body,!1)}function execWithArity(e,t){var a=[(0,_ast.word)("resolveStack")];return a.push.apply(a,(0,_clone2.default)(t.body,!1)),a.push((0,_ast.word)("forkStack"),(0,_ast.aitValue)(e)),a}function assignVariableEmptyAggr(e){return[(0,_ast.aitVar)(e),(0,_ast.quotationNonReversed)([])]}function assignVariableAggr(e,t){return[(0,_ast.aitVar)(t),e]}function assignVariable(e,t){return[(0,_ast.aitVar)(t),(0,_ast.aitValue)(e)]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.value=exports.aggregate=exports.quotation=exports.word=void 0,exports.exec=exec,exports.execWithArity=execWithArity,exports.assignVariableEmptyAggr=assignVariableEmptyAggr,exports.assignVariableAggr=assignVariableAggr,exports.assignVariable=assignVariable;var _clone=require("clone"),_clone2=_interopRequireDefault(_clone),_ast=require("../../parser/ast");exports.word=_ast.word,exports.quotation=_ast.quotationNonReversed,exports.aggregate=_ast.quotationNonReversed,exports.value=_ast.aitValue;

},{"../../parser/ast":6,"clone":28}],24:[function(require,module,exports){
module.exports.aitFFI__F=require("./dist/runtime/lexicon").jsWord,module.exports.aitFFILookupVariable=require("./dist/runtime/lexicon").lookupVariable,module.exports.aitFFIStoreRootVariable=require("./dist/runtime/lexicon").storeRootVariable,module.exports.aitFFIStoreVariable=require("./dist/runtime/lexicon").storeVariable,module.exports.aitFFIWrapValue=require("./dist/parser/ast-walkers").wrapValueFFI,module.exports.aitFFIWrapQuotation=require("./dist/parser/ast-walkers").wrapQuotationFFI,module.exports.aitFFIWrapAggregate=require("./dist/parser/ast-walkers").wrapQuotationFFI,module.exports.aitFFIUnwrapValue=require("./dist/parser/ast-walkers").unwrapValueFFI,module.exports.aitFFIPrint=require("./dist/parser/ast-walkers").prettyPrint;

},{"./dist/parser/ast-walkers":5,"./dist/runtime/lexicon":9}],25:[function(require,module,exports){
module.exports=require("../dist/runtime/browser").default;

},{"../dist/runtime/browser":8}],26:[function(require,module,exports){
"use strict";function placeHoldersCount(o){var r=o.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===o[r-2]?2:"="===o[r-1]?1:0}function byteLength(o){return 3*o.length/4-placeHoldersCount(o)}function toByteArray(o){var r,e,t,u,n,p=o.length;u=placeHoldersCount(o),n=new Arr(3*p/4-u),e=u>0?p-4:p;var a=0;for(r=0;r<e;r+=4)t=revLookup[o.charCodeAt(r)]<<18|revLookup[o.charCodeAt(r+1)]<<12|revLookup[o.charCodeAt(r+2)]<<6|revLookup[o.charCodeAt(r+3)],n[a++]=t>>16&255,n[a++]=t>>8&255,n[a++]=255&t;return 2===u?(t=revLookup[o.charCodeAt(r)]<<2|revLookup[o.charCodeAt(r+1)]>>4,n[a++]=255&t):1===u&&(t=revLookup[o.charCodeAt(r)]<<10|revLookup[o.charCodeAt(r+1)]<<4|revLookup[o.charCodeAt(r+2)]>>2,n[a++]=t>>8&255,n[a++]=255&t),n}function tripletToBase64(o){return lookup[o>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[63&o]}function encodeChunk(o,r,e){for(var t,u=[],n=r;n<e;n+=3)t=(o[n]<<16)+(o[n+1]<<8)+o[n+2],u.push(tripletToBase64(t));return u.join("")}function fromByteArray(o){for(var r,e=o.length,t=e%3,u="",n=[],p=0,a=e-t;p<a;p+=16383)n.push(encodeChunk(o,p,p+16383>a?a:p+16383));return 1===t?(r=o[e-1],u+=lookup[r>>2],u+=lookup[r<<4&63],u+="=="):2===t&&(r=(o[e-2]<<8)+o[e-1],u+=lookup[r>>10],u+=lookup[r>>4&63],u+=lookup[r<<2&63],u+="="),n.push(u),n.join("")}exports.byteLength=byteLength,exports.toByteArray=toByteArray,exports.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;

},{}],27:[function(require,module,exports){
(function (global){
"use strict";function typedArraySupport(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(t,e){if(kMaxLength()<e)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=Buffer.prototype:(null===t&&(t=new Buffer(e)),t.length=e),t}function Buffer(t,e,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,t)}return from(this,t,e,r)}function from(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?fromArrayBuffer(t,e,r,n):"string"==typeof e?fromString(t,e,r):fromObject(t,e)}function assertSize(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function alloc(t,e,r,n){return assertSize(e),e<=0?createBuffer(t,e):void 0!==r?"string"==typeof n?createBuffer(t,e).fill(r,n):createBuffer(t,e).fill(r):createBuffer(t,e)}function allocUnsafe(t,e){if(assertSize(e),t=createBuffer(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function fromString(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|byteLength(e,r),f=(t=createBuffer(t,n)).write(e,r);return f!==n&&(t=t.slice(0,f)),t}function fromArrayLike(t,e){var r=e.length<0?0:0|checked(e.length);t=createBuffer(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromArrayBuffer(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),Buffer.TYPED_ARRAY_SUPPORT?(t=e).__proto__=Buffer.prototype:t=fromArrayLike(t,e),t}function fromObject(t,e){if(Buffer.isBuffer(e)){var r=0|checked(e.length);return 0===(t=createBuffer(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||isnan(e.length)?createBuffer(t,0):fromArrayLike(t,e);if("Buffer"===e.type&&isArray(e.data))return fromArrayLike(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function SlowBuffer(t){return+t!=t&&(t=0),Buffer.alloc(+t)}function byteLength(t,e){if(Buffer.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(n)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),n=!0}}function slowToString(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"latin1":case"binary":return latin1Slice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function swap(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function bidirectionalIndexOf(t,e,r,n,f){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=f?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(f)return-1;r=t.length-1}else if(r<0){if(!f)return-1;r=0}if("string"==typeof e&&(e=Buffer.from(e,n)),Buffer.isBuffer(e))return 0===e.length?-1:arrayIndexOf(t,e,r,n,f);if("number"==typeof e)return e&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):arrayIndexOf(t,[e],r,n,f);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(t,e,r,n,f){function i(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}var o=1,u=t.length,s=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,u/=2,s/=2,r/=2}var a;if(f){var h=-1;for(a=r;a<u;a++)if(i(t,a)===i(e,-1===h?0:a-h)){if(-1===h&&(h=a),a-h+1===s)return h*o}else-1!==h&&(a-=a-h),h=-1}else for(r+s>u&&(r=u-s),a=r;a>=0;a--){for(var c=!0,l=0;l<s;l++)if(i(t,a+l)!==i(e,l)){c=!1;break}if(c)return a}return-1}function hexWrite(t,e,r,n){r=Number(r)||0;var f=t.length-r;n?(n=Number(n))>f&&(n=f):n=f;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;++o){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))return o;t[r+o]=u}return o}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function latin1Write(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?base64.fromByteArray(t):base64.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var n=[],f=e;f<r;){var i=t[f],o=null,u=i>239?4:i>223?3:i>191?2:1;if(f+u<=r){var s,a,h,c;switch(u){case 1:i<128&&(o=i);break;case 2:128==(192&(s=t[f+1]))&&(c=(31&i)<<6|63&s)>127&&(o=c);break;case 3:s=t[f+1],a=t[f+2],128==(192&s)&&128==(192&a)&&(c=(15&i)<<12|(63&s)<<6|63&a)>2047&&(c<55296||c>57343)&&(o=c);break;case 4:s=t[f+1],a=t[f+2],h=t[f+3],128==(192&s)&&128==(192&a)&&128==(192&h)&&(c=(15&i)<<18|(63&s)<<12|(63&a)<<6|63&h)>65535&&c<1114112&&(o=c)}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),f+=u}return decodeCodePointsArray(n)}function decodeCodePointsArray(t){var e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;++f)n+=String.fromCharCode(127&t[f]);return n}function latin1Slice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;++f)n+=String.fromCharCode(t[f]);return n}function hexSlice(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var f="",i=e;i<r;++i)f+=toHex(t[i]);return f}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),f="",i=0;i<n.length;i+=2)f+=String.fromCharCode(n[i]+256*n[i+1]);return f}function checkOffset(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,f,i){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>f||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function objectWriteUInt16(t,e,r,n){e<0&&(e=65535+e+1);for(var f=0,i=Math.min(t.length-r,2);f<i;++f)t[r+f]=(e&255<<8*(n?f:1-f))>>>8*(n?f:1-f)}function objectWriteUInt32(t,e,r,n){e<0&&(e=4294967295+e+1);for(var f=0,i=Math.min(t.length-r,4);f<i;++f)t[r+f]=e>>>8*(n?f:3-f)&255}function checkIEEE754(t,e,r,n,f,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(t,e,r,n,f){return f||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,f){return f||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if((t=stringtrim(t).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,f=null,i=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!f){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}f=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),f=r;continue}r=65536+(f-55296<<10|r-56320)}else f&&(e-=3)>-1&&i.push(239,191,189);if(f=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function asciiToBytes(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,f,i=[],o=0;o<t.length&&!((e-=2)<0);++o)n=(r=t.charCodeAt(o))>>8,f=r%256,i.push(f),i.push(n);return i}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var f=0;f<n&&!(f+r>=e.length||f>=t.length);++f)e[f+r]=t[f];return f}function isnan(t){return t!==t}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("isarray");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(t){return t.__proto__=Buffer.prototype,t},Buffer.from=function(t,e,r){return from(null,t,e,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(t,e,r){return alloc(null,t,e,r)},Buffer.allocUnsafe=function(t){return allocUnsafe(null,t)},Buffer.allocUnsafeSlow=function(t){return allocUnsafe(null,t)},Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,f=0,i=Math.min(r,n);f<i;++f)if(t[f]!==e[f]){r=t[f],n=e[f];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Buffer.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=Buffer.allocUnsafe(e),f=0;for(r=0;r<t.length;++r){var i=t[r];if(!Buffer.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,f),f+=i.length}return n},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)swap(this,e,e+1);return this},Buffer.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)swap(this,e,e+3),swap(this,e+1,e+2);return this},Buffer.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)swap(this,e,e+7),swap(this,e+1,e+6),swap(this,e+2,e+5),swap(this,e+3,e+4);return this},Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t,e,r,n,f){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===f&&(f=this.length),e<0||r>t.length||n<0||f>this.length)throw new RangeError("out of range index");if(n>=f&&e>=r)return 0;if(n>=f)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,f>>>=0,this===t)return 0;for(var i=f-n,o=r-e,u=Math.min(i,o),s=this.slice(n,f),a=t.slice(e,r),h=0;h<u;++h)if(s[h]!==a[h]){i=s[h],o=a[h];break}return i<o?-1:o<i?1:0},Buffer.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},Buffer.prototype.indexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!0)},Buffer.prototype.lastIndexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!1)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var f=this.length-e;if((void 0===r||r>f)&&(r=f),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"latin1":case"binary":return latin1Write(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=Buffer.prototype;else{var f=e-t;n=new Buffer(f,void 0);for(var i=0;i<f;++i)n[i]=this[i+t]}return n},Buffer.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return n},Buffer.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t+--e],f=1;e>0&&(f*=256);)n+=this[t+--e]*f;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return f*=128,n>=f&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=e,f=1,i=this[t+--n];n>0&&(f*=256);)i+=this[t+--n]*f;return f*=128,i>=f&&(i-=Math.pow(2,8*e)),i},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||checkInt(this,t,e,r,Math.pow(2,8*r)-1,0);var f=1,i=0;for(this[e]=255&t;++i<r&&(f*=256);)this[e+i]=t/f&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||checkInt(this,t,e,r,Math.pow(2,8*r)-1,0);var f=r-1,i=1;for(this[e+f]=255&t;--f>=0&&(i*=256);)this[e+f]=t/i&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=0,o=1,u=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=r-1,o=1,u=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var f,i=n-r;if(this===t&&r<e&&e<n)for(f=i-1;f>=0;--f)t[f+e]=this[f+r];else if(i<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(f=0;f<i;++f)t[f+e]=this[f+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},Buffer.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var f=t.charCodeAt(0);f<256&&(t=f)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var i;if("number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var o=Buffer.isBuffer(t)?t:utf8ToBytes(new Buffer(t,n).toString()),u=o.length;for(i=0;i<r-e;++i)this[i+e]=o[i%u]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"base64-js":26,"ieee754":29,"isarray":30}],28:[function(require,module,exports){
(function (Buffer){
var clone=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}function t(r,u,f,a,l){function p(r,f){if(null===r)return null;if(0===f)return r;var j,g;if("object"!=typeof r)return r;if(e(r,o))j=new o;else if(e(r,c))j=new c;else if(e(r,i))j=new i(function(e,t){r.then(function(t){e(p(t,f-1))},function(e){t(p(e,f-1))})});else if(t.__isArray(r))j=[];else if(t.__isRegExp(r))j=new RegExp(r.source,n(r)),r.lastIndex&&(j.lastIndex=r.lastIndex);else if(t.__isDate(r))j=new Date(r.getTime());else{if(y&&Buffer.isBuffer(r))return j=new Buffer(r.length),r.copy(j),j;e(r,Error)?j=Object.create(r):void 0===a?(g=Object.getPrototypeOf(r),j=Object.create(g)):(j=Object.create(a),g=a)}if(u){var O=s.indexOf(r);if(-1!=O)return b[O];s.push(r),b.push(j)}e(r,o)&&r.forEach(function(e,t){var r=p(t,f-1),n=p(e,f-1);j.set(r,n)}),e(r,c)&&r.forEach(function(e){var t=p(e,f-1);j.add(t)});for(var v in r){var d;g&&(d=Object.getOwnPropertyDescriptor(g,v)),d&&null==d.set||(j[v]=p(r[v],f-1))}if(Object.getOwnPropertySymbols)for(var m=Object.getOwnPropertySymbols(r),v=0;v<m.length;v++){var _=m[v];(!(x=Object.getOwnPropertyDescriptor(r,_))||x.enumerable||l)&&(j[_]=p(r[_],f-1),x.enumerable||Object.defineProperty(j,_,{enumerable:!1}))}if(l)for(var w=Object.getOwnPropertyNames(r),v=0;v<w.length;v++){var h=w[v],x=Object.getOwnPropertyDescriptor(r,h);x&&x.enumerable||(j[h]=p(r[h],f-1),Object.defineProperty(j,h,{enumerable:!1}))}return j}"object"==typeof u&&(f=u.depth,a=u.prototype,l=u.includeNonEnumerable,u=u.circular);var s=[],b=[],y="undefined"!=typeof Buffer;return void 0===u&&(u=!0),void 0===f&&(f=1/0),p(r,f)}function r(e){return Object.prototype.toString.call(e)}function n(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}var o;try{o=Map}catch(e){o=function(){}}var c;try{c=Set}catch(e){c=function(){}}var i;try{i=Promise}catch(e){i=function(){}}return t.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},t.__objToStr=r,t.__isDate=function(e){return"object"==typeof e&&"[object Date]"===r(e)},t.__isArray=function(e){return"object"==typeof e&&"[object Array]"===r(e)},t.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===r(e)},t.__getRegExpFlags=n,t}();"object"==typeof module&&module.exports&&(module.exports=clone);

}).call(this,require("buffer").Buffer)
},{"buffer":27}],29:[function(require,module,exports){
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};

},{}],30:[function(require,module,exports){
var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};

},{}],31:[function(require,module,exports){
!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof module&&module.exports?module.exports=n():t.Parsimmon=n()}(this,function(){"use strict";function t(n){if(!(this instanceof t))return new t(n);this._=n}function n(n){return n instanceof t}function r(t,n){return{status:!0,index:t,value:n,furthest:-1,expected:[]}}function e(t,n){return{status:!1,index:-1,value:null,furthest:t,expected:[n]}}function u(t,n){if(!n)return t;if(t.furthest>n.furthest)return t;var r=t.furthest===n.furthest?i(t.expected,n.expected):n.expected;return{status:t.status,index:t.index,value:t.value,furthest:n.furthest,expected:r}}function i(t,n){var r=t.length,e=n.length;if(0===r)return n;if(0===e)return t;for(var u={},i=0;i<r;i++)u[t[i]]=!0;for(var a=0;a<e;a++)u[n[a]]=!0;var o=[];for(var f in u)u.hasOwnProperty(f)&&o.push(f);return o.sort(),o}function a(t){if(!n(t))throw new Error("not a parser: "+t)}function o(t){if("number"!=typeof t)throw new Error("not a number: "+t)}function f(t){if(!(t instanceof RegExp))throw new Error("not a regexp: "+t);for(var n=y(t),r=0;r<n.length;r++){var e=n.charAt(r);if("i"!=e&&"m"!=e&&"u"!=e)throw new Error('unsupported regexp flag "'+e+'": '+t)}}function s(t){if("function"!=typeof t)throw new Error("not a function: "+t)}function c(t){if("string"!=typeof t)throw new Error("not a string: "+t)}function l(t){return 1===t.length?t[0]:"one of "+t.join(", ")}function h(t,n){var r=n.index,e=r.offset;if(e===t.length)return", got the end of the input";var u=e>0?"'...":"'",i=t.length-e>12?"...'":"'";return" at line "+r.line+" column "+r.column+", got "+u+t.slice(e,e+12)+i}function p(t,n){return"expected "+l(n.expected)+h(t,n)}function d(){for(var n=[].slice.call(arguments),e=n.length,i=0;i<e;i+=1)a(n[i]);return t(function(t,i){for(var a,o=new Array(e),f=0;f<e;f+=1){if(!(a=u(n[f]._(t,i),a)).status)return a;o[f]=a.value,i=a.index}return u(r(i,o),a)})}function v(){var t=[].slice.call(arguments);if(0===t.length)throw new Error("seqMap needs at least one argument");var n=t.pop();return s(n),d.apply(null,t).map(function(t){return n.apply(null,t)})}function g(){var n=[].slice.call(arguments),r=n.length;if(0===r)return k("zero alternates");for(var e=0;e<r;e+=1)a(n[e]);return t(function(t,r){for(var e,i=0;i<n.length;i+=1)if((e=u(n[i]._(t,r),e)).status)return e;return e})}function m(t,n){a(t),a(n);var r=n.then(t).many();return t.chain(function(t){return r.map(function(n){return[t].concat(n)})})}function x(n){c(n);var u="'"+n+"'";return t(function(t,i){var a=i+n.length,o=t.slice(i,a);return o===n?r(a,o):e(i,u)})}function y(t){var n=""+t;return n.slice(n.lastIndexOf("/")+1)}function w(t){return RegExp("^(?:"+t.source+")",y(t))}function E(n,u){f(n),arguments.length>=2?o(u):u=0;var i=w(n),a=""+n;return t(function(t,n){var o=i.exec(t.slice(n));if(o){var f=o[0],s=o[u];if(null!=s)return r(n+f.length,s)}return e(n,a)})}function _(n){return t(function(t,e){return r(e,n)})}function k(n){return t(function(t,r){return e(r,n)})}function O(r){if(n(r))return t(function(t,n){var e=r._(t,n);return e.index=n,e.value="",e});if("string"==typeof r)return O(x(r));if(r instanceof RegExp)return O(E(r));throw new Error("not a string, regexp, or parser: "+r)}function P(n){return s(n),t(function(t,u){var i=t.charAt(u);return u<t.length&&n(i)?r(u+1,i):e(u,"a character matching "+n)})}function b(t,n){var r=t.slice(0,n).split("\n");return{offset:n,line:r.length,column:r[r.length-1].length+1}}function A(){return k("fantasy-land/empty")}var z=t.prototype;z.parse=function(t){if("string"!=typeof t)throw new Error(".parse must be called with a string as its argument");var n=this.skip(R)._(t,0);return n.status?{status:!0,value:n.value}:{status:!1,index:b(t,n.furthest),expected:n.expected}},z.tryParse=function(t){var n=this.parse(t);if(n.status)return n.value;var r=p(t,n),e=new Error(r);throw e.type="ParsimmonError",e.result=n,e},z.or=function(t){return g(this,t)},z.then=function(t){if("function"==typeof t)throw new Error("chaining features of .then are no longer supported, use .chain instead");return a(t),d(this,t).map(function(t){return t[1]})},z.many=function(){var n=this;return t(function(t,e){for(var i=[],a=void 0;;){if(!(a=u(n._(t,e),a)).status)return u(r(e,i),a);e=a.index,i.push(a.value)}})},z.times=function(n,e){var i=this;return arguments.length<2&&(e=n),o(n),o(e),t(function(t,a){for(var o=[],f=void 0,s=void 0,c=0;c<n;c+=1){if(f=i._(t,a),s=u(f,s),!f.status)return s;a=f.index,o.push(f.value)}for(;c<e&&(f=i._(t,a),s=u(f,s),f.status);c+=1)a=f.index,o.push(f.value);return u(r(a,o),s)})},z.result=function(t){return this.map(function(){return t})},z.atMost=function(t){return this.times(0,t)},z.atLeast=function(t){return v(this.times(t),this.many(),function(t,n){return t.concat(n)})},z.map=function(n){s(n);var e=this;return t(function(t,i){var a=e._(t,i);return a.status?u(r(a.index,n(a.value)),a):a})},z["fantasy-land/map"]=z.map,z.skip=function(t){return d(this,t).map(function(t){return t[0]})},z.mark=function(){return v(j,this,j,function(t,n,r){return{start:t,value:n,end:r}})},z.lookahead=function(t){return this.skip(O(t))},z.desc=function(n){var r=this;return t(function(t,e){var u=r._(t,e);return u.status||(u.expected=[n]),u})},z.fallback=function(t){return this.or(_(t))};var q=t(function(t,n){return n>=t.length?e(n,"any character"):r(n+1,t.charAt(n))}),M=t(function(t,n){return r(t.length,t.slice(n))}),R=t(function(t,n){return n<t.length?e(n,"EOF"):r(n,null)}),j=t(function(t,n){return r(n,b(t,n))});z.concat=z.or,z["fantasy-land/concat"]=z.concat,z.empty=A,z["fantasy-land/empty"]=z.empty,z.of=_,z["fantasy-land/of"]=z.of,z.ap=function(t){return v(t,this,function(t,n){return t(n)})},z["fantasy-land/ap"]=z.ap,z.chain=function(n){var r=this;return t(function(t,e){var i=r._(t,e);return i.status?u(n(i.value)._(t,i.index),i):i})},z["fantasy-land/chain"]=z.chain;var B=E(/[0-9]/).desc("a digit"),F=E(/[0-9]*/).desc("optional digits"),W=E(/[a-z]/i).desc("a letter"),I=E(/[a-z]*/i).desc("optional letters"),L=E(/\s*/).desc("optional whitespace"),S=E(/\s+/).desc("whitespace");return t.all=M,t.alt=g,t.any=q,t.custom=function(n){return t(n(r,e))},t.digit=B,t.digits=F,t.eof=R,t.fail=k,t.formatError=p,t.index=j,t.isParser=n,t.lazy=function(n,r){arguments.length<2&&(r=n,n=void 0);var e=t(function(t,n){return e._=r()._,e._(t,n)});return n?e.desc(n):e},t.letter=W,t.letters=I,t.lookahead=O,t.makeFailure=e,t.makeSuccess=r,t.noneOf=function(t){return P(function(n){return t.indexOf(n)<0})},t.oneOf=function(t){return P(function(n){return t.indexOf(n)>=0})},t.optWhitespace=L,t.Parser=t,t.regex=E,t.regexp=E,t.sepBy=function(t,n){return m(t,n).or(_([]))},t.sepBy1=m,t.seq=d,t.seqMap=v,t.string=x,t.succeed=_,t.takeWhile=function(n){return s(n),t(function(t,e){for(var u=e;u<t.length&&n(t.charAt(u));)u++;return r(u,t.slice(e,u))})},t.test=P,t.whitespace=S,t.empty=A,t["fantasy-land/empty"]=A,t.of=_,t["fantasy-land/of"]=_,t});

},{}],32:[function(require,module,exports){
(function (Buffer){
"use strict";function interpret(g){runtime.reset(),runtime.evaluate(g);var a=runtime.scope.__aitCanvasContext.body.canvas;canvasContainer.replaceChild(a,canvasContainer.firstChild)}function stopAnimations(){runtime.program=[{type:"word",body:"stopAnimations"}],runtime.executeProgram()}var Browser=require("ait-lang/runtimes/browser"),runtime=Browser();Object.assign(runtime.lexicon,require("ait-canvas")),Object.assign(runtime.lexicon,require("ait-dom")),Object.assign(runtime.lexicon,require("ait-animation"));var source=document.createElement("textarea");source.setAttribute("rows",50),source.setAttribute("cols",80),source.value=Buffer("ImNhbnZhcyIgY3JlYXRlRWxlbWVudCBjYW52YXNDb250ZXh0CjUwMCA1MDAgY2FudmFzRGltZW5zaW9ucwoKaHNsOiAiaHNsKCVzLCAlcyUsICVzJSkiIHJlcGxhY2UzIDsKCnRlYWw6IDYwIDg1IDE4MCBoc2wgOwpibGFjazogMCAwIDAgaHNsIDsKcGluazogIiNkMzZmYzgiIDsKYmx1ZTogIiMyMzQ3ZTYiIDsKClk6IDEgYXQgOwpYOiAwIGF0IDsKd2l0aFg6IDAgaW5zIDsKd2l0aFk6IDEgaW5zIDsKCnRvQ2FydGhYOgogIC0+IFAKICBQIFggUCBZIGNvcyAqIDsKCnRvQ2FydGhZOgogIC0+IFAKICBQIFggUCBZIHNpbiAqIDsKCnRvQ2FydGg6CiAgLT4gUAogIFAgdG9DYXJ0aFgKICBQIHRvQ2FydGhZCiAgUCB3aXRoWSB3aXRoWCA7Cgp0b1BvbGFyUjoKICAtPiBQCiAgUCBYIGR1cCAqCiAgUCBZIGR1cCAqCiAgKyBzcXJ0IDsKCnRvUG9sYXJQaGk6CiAgLT4gUAogIFAgWCBQIFkgYXRhbjIgOwoKdG9Qb2xhcjoKICAtPiBQCiAgUCB0b1BvbGFyUgogIFAgdG9Qb2xhclBoaQogIFAgd2l0aFkgd2l0aFggOwoKdG9SYWQ6IDE4MCAvIFBJICogOwoKMmRlZzogUEkgLyAxODAgKiA7CgphZGQyWToKICBzd2FwCiAgLT4gUAogIFAgWSArIFAgd2l0aFkgOwphZGQyWDoKICBzd2FwCiAgLT4gUAogIFAgWCArIFAgd2l0aFggOwoKSDogY2FudmFzSGVpZ2h0IDsKVzogY2FudmFzV2lkdGggOwpXTWF4OiBXIDIgLyA7CldNaW46IFdNYXggbmVnIDsKSE1heDogSCAyIC8gOwpITWluOiBITWF4IG5lZyA7CldpbmRvd01pbjogV01pbiBITWluIFtdIGNvbnMgY29ucyA7CldpbmRvd01heDogV01heCBITWF4IFtdIGNvbnMgY29ucyA7CgpmaWxsQmFja2dyb3VuZDoKICBibGFjayBmaWxsU3R5bGUKICBXaW5kb3dNaW4gVyBIIGZpbGxSZWN0IDsKCnJhbmRvbTI1OiAtMjUgMjUgcmFuZG9tMiA7CgpjYWxjTmV4dENvbnRyb2xQb2ludDoKICByYW5kb20yNSBhZGQyWAogIDMgdG9SYWQgYWRkMlkgOwoKY2FsY05leHRBbG9uZ0NpcmNsZToKICA2IHRvUmFkIGFkZDJZIDsKCmNpcmNsZToKICBiZWdpblBhdGgKICBkdXAgdG9DYXJ0aCBtb3ZlVG8KICBbIFkgMiBQSSAqIDYgdG9SYWQgLSA8PSBdCiAgWwogICAgZHVwIFsgY2FsY05leHRDb250cm9sUG9pbnQgdG9DYXJ0aCBdIGRpcAogICAgY2FsY05leHRBbG9uZ0NpcmNsZSBkdXAKICAgIFsgdG9DYXJ0aCBxdWFkcmF0aWNDdXJ2ZVRvIF0gZGlwCiAgXQogIHdoaWxlCiAgcG9wCiAgY2xvc2VQYXRoIDsKCnRlYWxTdHJva2U6IHRlYWwgc3Ryb2tlU3R5bGUgOwpwaW5rU3Ryb2tlOiBwaW5rIHN0cm9rZVN0eWxlIDsKYmx1ZVN0cm9rZTogYmx1ZSBzdHJva2VTdHlsZSA7Cgpjb25maWc6CiAgV01heCBITWF4IHRyYW5zbGF0ZQogIDIuNSBsaW5lV2lkdGgKICAwLjUgZ2xvYmFsQWxwaGEKICBibGFjayBmaWxsU3R5bGUgOwoKY29uZmlnCjEwClsgZmlsbEJhY2tncm91bmQKICBbMTc1IDBdIGNpcmNsZSB0ZWFsU3Ryb2tlIHN0cm9rZSBbXSB1bnN0YWNrCiAgWzEyNSAwXSBjaXJjbGUgcGlua1N0cm9rZSBzdHJva2UgW10gdW5zdGFjawogIFsxNTAgMF0gY2lyY2xlIGJsdWVTdHJva2Ugc3Ryb2tlIFtdIHVuc3RhY2sgXQp0aW1lcwo=","base64"),document.body.appendChild(source);var doEval=document.createElement("button");doEval.textContent="Evaluate",document.body.appendChild(doEval);var stopEval=document.createElement("button");stopEval.textContent="Stop",document.body.appendChild(stopEval);var canvasContainer=document.createElement("div");document.body.appendChild(canvasContainer),canvasContainer.innerHTML="<div />",doEval.addEventListener("click",function(){return interpret(source.value)}),stopEval.addEventListener("click",stopAnimations);

}).call(this,require("buffer").Buffer)
},{"ait-animation":1,"ait-canvas":2,"ait-dom":3,"ait-lang/runtimes/browser":25,"buffer":27}]},{},[32]);
